Generals
human, (sponsor) user id for EklipZ

REFACTOR QUEUE TO DO NEXT COMMIT:







HOW MANY VERTICES IN A GRID??
v = 2(W*H) - W - H
(all from top left to bot right, each node adds 2 new vertices except the right and bottom edges, which all add 1 except the bottom right corner, which adds 0).

largest map is maybe 30x30 = 1740
dijkstras would be v^2 so 3.02mil



TODO
during 50-100, just straight up run a gather to ALL undiscovered tiles within like, 6 tiles of the predicted enemy general location, see what behavior results...?

kill threat should have two modes, one that prioritizes killing enemy tiles on the way, and one that prioritizes max army intercept (cur behav).
kill threat needs to close distance to target as much as possible, space-wise, on every move. Right now it likes to run in parallel as long as possible for some reason.
	Needs to understand that it can intercept one move behind the army on longer threat paths where that is safe.

Write an adversarial army scrim tester, at least, if not a full test harness. Can serve as the basis for threat defense.

During expansion, move-half when multiple expansion routes from current tile that are between self and enemy. Prioritize tiles equadistant from both generals near end of cycle.
During expansion ^ and run away from enemy army.
	^ take neutral tiles on way TOWARDS enemy territory, take enemy tiles while backing out. EG at start of game during 25-50 or 50-75, attack neutrals next to enemy path until path ends, then curve back onto enemy 1's and take them all the way back towards your gen.

Figure out defensive cities as cities closer to general than half the distance to predicted enemy general, use those as launch points instead.
Try variation of gather where the gather begins with a single max value target path to the launch path, but then use an MST gather from there to gather to that path. 
	intelligently prune that until it reaches the point where it is some sort of full local gather around that block (like, don't gather from places that are closer to the other side of the gather path or whatever). Iterate if necessary with more additions with this method.

LOSING BECAUSE
Not gathering outer tiles (in later game? lots of 8/9s floating around edges when dies).
Taking cities in enemy vision or too close to enemy and then not holding them.
Not holding cities (friendly or enemy). should maintain a city contestation list of recently / in danger cities and gather to them.
Attacking too deep in enemy territory early?
Not blobbing around self as well as old versions...?
gathering repeatedly from cities/general towards enemy vision tiles


debug drawing atm

GREEN TARGET: Threat save tile
PURPLE TARGET: General defense threat save tile(...?)
RED: Trying to kill danger tile, or targeting city

PURPLE: max undiscovered area alone - purple
	bottom right grid text = undiscovered area value
		light x's around this undiscovered areas tiles that were included

GOLD: general evaluation just based on undiscovered from enemy territory into fog, pre-emergence-army-calculations
	bottom left grid text = ^ value

BLUE: general evaluation ACTUAL approximation
	mid right text = ^ value



	text


|                     |
|                     |
|                     |
|                     |
|           ACTUAL pri|
|           emergence |
|undis+fog  undisc exp|





4 - 25 seems passable, 17 pretty bad, 21 bad, 26 good, 29 very good, 34 great
6 - 45 passable, 27 real bad, 32 bad, 35 borderline ok, 48 pretty good, 60 great
8 - 91 great, 80 pretty good, 75 ok, 55 meh, 52 bad, 48 terrible
10 - not super useful <80 bad, >95 good





HOW GATHER ITER WORKS:

origStartDict = startDict.copy
newStartDict = startDict.copy
Build tree node lookup from startdict
	Gather to max turns
	put all those paths in the tree nodes
	recalc tree values (maaaaaaaybe leaves gatherTurns 1 on empty root nodes in some situations?)
	rootNodes = tree node lookup intersection with origStartDict
	prune mst down to some point OR LOWER, cleans up things in tree nodes but not newStartDict (but, we haven't added anything to newStartDict yet)
	recalc tree values again (leaves gatherTurns 1 on empty root nodes in some situations?)
	add shit to 



EXPANSION v2
build 'gather' tree INTO enemy territory (and/or cleaning up enemy tiles), so we have a plan on what to DO with gathered army.
Put a cap on the amount of army we want to send down those routes so we don't gather all our army to random places.
Have the main attack path(s) (@gen, @enemy cities) be an 'infinite' army sink to allow infinite army amounts towards it.
THEN tweak existing gather to gather towards those target points.
Have both expansion-plan and gather-plan be pruned simultaneously until we find the 'best' balance of time spent gathering vs expected tiles captured. Somehow factor in time for defending enemy pushes (may need to recalculate this every turn...? Yikes)